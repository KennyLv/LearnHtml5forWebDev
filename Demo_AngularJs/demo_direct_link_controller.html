<!DOCTYPE html><html><head>		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>		<title>controller and link</title>		<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">		<style>				div {						padding: 5px;						margin: 5px;						background-color: #EEE;						border: 1px solid #BBB;				}				div > div {						background-color: #DDD;				}				div > div > div {						background-color: #CCC;				}				ol {						list-style: decimal;						margin-left: 30px;				}		</style></head><body ng-app="plunker" ng-controller="MainCtrl">		<a href="http://jasonmore.net/angular-js-directives-difference-controller-link/" target="_blank">		Angular.js directives – Difference between controller and link		</a>		<br/>				<div>				<h1> example of the angular controller and link</h1>				<example-directive></example-directive>		</div>				<div>				<h1> example of the angular compilation and linking pipeline</h1>				<div log-compile="parent">						<div log-compile="..child 1">								<div log-compile="....child 1 a"></div>								<div log-compile="....child 1 b"></div>						</div>						<div log-compile="..child 2">								<div log-compile="....child 2 a"></div>								<div log-compile="....child 2 b"></div>						</div>				</div>				<!-- LOG -->				<pre>{{log}}</pre>		</div>				<div>				<parent-directive></parent-directive> 				(above should actually say "hi there", not "bar")		</div>		<script type="text/javascript" src="../_Resource/angular_1.2.25/angular.min.js"></script>		<script type="text/javascript">				var app = angular.module('plunker', []).directive('exampleDirective', function() {					  return {									restrict: 'E',									template: '<p>Hello {{name}}!</p>',									/*											Before compilation? – Controller											After compilation? – Link																		So, never condone putting DOM manipulation in an angular controller																		But, but, but, more details please! Ok, ok, fair enough. Couple of things to note:											1, 											controller ‘$scope’ and link ‘scope’ are the same thing. 											The difference is paramaters sent to the controller get there through Dependency Injection (so calling it ‘$scope’ is required), 											where parameters sent to link are standard order based funcitons.  											All of the angular examples will use ‘scope’ when in the context, but I usually call it $scope for sanity reasons: http://plnkr.co/edit/lqcoJj?p=preview											2, 											the $scope/scope in this example is simply the one passed in from the parent controller.											3,											‘link’ in directives are actually the ‘post-link’ function (see rendering pipeline below). 											Since pre-link is rarely used, the ‘link’ option is just a shortcut to setting up a ‘post-link’ function.																				So, whats a real world example? Well, when I’m deciding, I go by this											“Am I just doing template and scope things?” – goes into controller											“Am I adding some coolbeans jquery library?” – goes in link																		*/									controller: function($scope, $element){											console.log('in controller...');											$scope.name = $scope.name + "Second ";									},									/*									compile:function(tEle,tAttrs,trans){											console.log('in compile...');									},									*/									link: function(scope, el, attr) {											console.log('in link...');											scope.name = scope.name + "Third ";									}					  }				}).controller('MainCtrl', function($scope) {						$scope.name = 'First ';				});								app.directive('logCompile', function($rootScope) {						$rootScope.log = "";						return {								controller: function($scope, $attrs) {										$rootScope.log = $rootScope.log + ($attrs.logCompile + ' (controller)\n');								},								compile: function compile(element, attributes) {										$rootScope.log = $rootScope.log + (attributes.logCompile + ' (compile)\n');										return {												pre: function preLink(scope, element, attributes) {															$rootScope.log = $rootScope.log + (attributes.logCompile + ' (pre-link)\n');												},												post: function postLink(scope, element, attributes) {															element.prepend(attributes.logCompile);															$rootScope.log = $rootScope.log + (attributes.logCompile + ' (post-link)\n');												}										};								}						};				}).directive('terminate', function() {						return {								terminal: true						};				});												app.directive('parentDirective', function() {				  return {							restrict: 'E',							template: '<child-directive></child-directive>',							controller: function($scope, $element){								  // this will not work, since the child directives link 								  // function was not yet run								  $element.find('pre').text('hi there!');							},							link: function(scope, el){								  // the logic really belongs in link, as the child directive								  // uncomment this line to fix the problem								  // el.find('pre').text('hi there!')							}				  }				}).directive('childDirective', function() {				  return {							restrict:  'E',							template: '<h1>bar</h1>',							replace: true,							link: function($scope, $element, attr){								  // some awesome jquery pluggin which replaces things and bits								  $element.replaceWith(angular.element('<pre>' +  $element.text() + '</pre>'));							}				  }				});										</script></body></html>