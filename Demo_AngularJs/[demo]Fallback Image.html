<!DOCTYPE HTML><html lang="zh-cn" ng-app="myapp"><head>		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">		<title>demo</title>		<meta name="author" content="Kenny"></head><body>		<div  ng-controller="testCtrl">				<img fallback-images="images" />		</div>		<script type="text/javascript" src="../_Resource/angular_1.2.25/angular.min.js"></script>		<script type="text/javascript">			angular.module('myapp', []).directive('fallbackImages', function() {					return {							restrict : 'EA',							transclude:true,							scope : {									fallbackImages: '='							},							controller: function($scope) {									$scope.badImages = [];									$scope.imageFailed = function(image) {											$scope.badImages.push(image);									};									$scope.image = function() {											var potentialNextImages = $scope.fallbackImages.filter(function(image) {													return $scope.badImages.indexOf(image) === -1;											});											if(potentialNextImages.length > 0) {													return potentialNextImages[0];											}									};							},							link: function(scope, element, attrs) {									var loadElement = angular.element(document.createElement('img'));									scope.$watch('image()', function(newImage, oldImage) {											if(newImage) {													loadElement.attr('src', newImage);											}									});									loadElement.bind('error', function() {											scope.$apply(function() {												scope.imageFailed(loadElement.attr('src')); 											});									});									loadElement.bind('load', function() {											element.attr('src', loadElement.attr('src'));									});							}						};			}).controller('testCtrl', function ($scope) {					$scope.images = [							"http://localhost:8056/LearnHtml5forWebDev/[Game]/JiYiFanPai+/images/error1.png",							"http://localhost:8056/LearnHtml5forWebDev/[Game]/JiYiFanPai+/images/error2.png",							"http://localhost:8056/LearnHtml5forWebDev/[Game]/JiYiFanPai+/images/3.png",							"http://localhost:8056/LearnHtml5forWebDev/[Game]/JiYiFanPai+/images/wontadd4.png",							"http://localhost:8056/LearnHtml5forWebDev/[Game]/JiYiFanPai+/images/wontadd5.png",							"http://localhost:8056/LearnHtml5forWebDev/[Game]/JiYiFanPai+/images/wontadd6.png"					];			});		</script></body></html>