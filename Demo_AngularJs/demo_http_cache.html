<!DOCTYPE HTML><html lang="zh-cn"><head>		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">		<title>http cache demo</title>		<meta name="author" content="Kenny"></head><body ng-app="testApp"><div  ng-controller="testCtrl">		<div ng-repeat="item in items" >  				<p>{{item.region}}</p><p>{{item.name}}</p>		</div></div>			<script type="text/javascript" src="../assets/js/angular_1.2.25/angular.min.js"></script><script type="text/javascript">		var app = angular.module('testApp', []);		/*		app.config(function($httpProvider) {				$httpProvider.defaults.headers.put['Content-Type'] = 'application/x-www-form-urlencoded';				$httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';								$httpProvider.defaults.cache = $cacheFactory('myNewDefaultCache',{capacity: 100 });		});		*/				/*		angular.service('PostService', function ($http) {				var posts = {};				return {						getById: function (id) {								if (!posts[id]) {										this.find(id)								}; 								return posts[id]; 						},						find: function (id) {								return $http.get('posts/' + id).then(function (data) {										posts[id] = data;										return data;								});						}				};		}); 		angular.controller('PostCtrl', function ($scope, $routeParams, PostService) {				$scope.$watch(function () {						return PostService.getById($routeParams.id);				}, function (post) {						$scope.post = post;				});		});		*/		app.controller("testCtrl", ['$scope', '$http','$cacheFactory', function($scope, $http, $cacheFactory) {				/*				无缓存				*/				//$http.get('http://localhost:8056/LearnPHPforWebDev/DEMO/xpath_reader/')								/*				默认缓存				GET请求响应的结果会被存储在一个叫做$http的缓存中，这个缓存由Angular的$cacheFactory创建，并在Angular启动时会作为$http service的默认缓存。				{cache: true}告诉$http service要在$http的默认缓存中缓存特定的请求响应结果。				*/				//$http.get('http://localhost:8056/LearnPHPforWebDev/DEMO/xpath_reader/', {cache: true})								/*				设置LRU缓存				如果你不想要$http来存储，你只需要将它设置为LRU缓存即可（Least Recently Used）。				当发送第十一次请求时，最早一次的缓存会从缓存中被移除。				这里的缓存按顺序包含着一个项目列表以便它在进行一次新的请求时知道应该移除哪一个旧的缓存项目。				*/				//var lruCache = $cacheFactory('lruCache',{ capacity : 10 });				//$http.get('http://localhost:8056/LearnPHPforWebDev/DEMO/xpath_reader/', { cache: lruCache })								/*更改默认缓存*/				//$httpProvider.defaults.cache = $cacheFactory('myNewDefaultCache',{capacity: 100 });				//$http.get('http://localhost:8056/LearnPHPforWebDev/DEMO/xpath_reader/', {cache: true})								/*				高级缓存				如果你想使用缓存来改善用户体验，但是数据可能在一天或者几个小时之内就发生一次改变该怎么办？				你可能想要确保你的缓存数据一天或者几个十分钟就清空一次。				但是不幸的是，Angular中的$cacheFactory并没有提供这次额功能。				你可以使用setInterval()或者setTimeout()来进行一些修改，但是你可能并不想干这些事情。				为了解决这个问题，我们可以使用一个叫做angular-cache的第三方模块。				使用这个模块，你可以定期(cacheFlushInterval)清理你的缓存。当设置一个缓存时你可以指定maxAge，它用来表明该缓存中某个项目的最长存续时间。				或者你可以对整个缓存指定maxAge，它将运用在添加到该缓存中的所有项目之上。				*/								//$http.get('http://localhost:8056/LearnPHPforWebDev/DEMO/xpath_reader/')				$http.get('testdata.json')				.success(function(data){						console.log("success");						console.log(data);												$scope.items = data;				}).error(function(data,status,headers,config){						console.log("error");						console.log(data);				}).then(function(data){						console.log("then");						console.log(data);																		/*						如果你想要引用这个$http的默认缓存来获取其中的项目，移除其中的项目，清空缓存等等。						你只需要在任何地方注入$cahcheFactory即可，然后我们就可以通过下面的代码来引用默认$http缓存：						*/						var $httpDefaultCache = $cacheFactory.get('$http');						//var $httpDefaultCache = $cacheFactory.get('myNewDefaultCache');												/*						如果你想要引用非默认缓存来获取其中的项目：						*/						//var $httpDefaultCache = $cacheFactory.get('lruCache');												console.log($httpDefaultCache);						var cacheDate = $httpDefaultCache.get('http://localhost:8056/LearnPHPforWebDev/DEMO/xpath_reader/');						console.log("cacheDate");						console.log(cacheDate);												//篡改数据						//var newData = {};						//$httpDefaultCache.put('http://localhost:8056/LearnPHPforWebDev/DEMO/xpath_reader/', newData);						//移出某个数据						//$httpDefaultCache.remove('http://localhost:8056/LearnPHPforWebDev/DEMO/xpath_reader/');						//移出所有数据						//$httpDefaultCache.removeAll();										});										}]);</script></body></html>